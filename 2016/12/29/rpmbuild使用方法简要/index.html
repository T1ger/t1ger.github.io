	<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="google-site-verification" content="B6QNJ8N2Q7hbnMncyrM5GMCWgK-vIAEx0o2DQre64ls" />
  
  <title>rpmbuild使用方法简要 | t1ger的茶馆</title>
  <meta name="author" content="t1ger">
  
  <meta name="description" content="https://t1ger.github.io/">
  

  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta property="og:title" content="rpmbuild使用方法简要"/>
  <meta property="og:site_name" content="t1ger的茶馆"/>

  
  
		<!-- favicon -->
		<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
		<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
		<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.png">
		<meta name="theme-color" content="#009688">
		<!-- favicon end -->
    <!-- <link href="/favicon.ico" rel="icon"> -->
  

  <!-- toc -->
  <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css">

  <!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
  <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">

  <!-- material design -->
	<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
  <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css">
  <!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
	<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css">

  <link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">

  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">

  

  

  <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="/libs/jquery-2.0.3.min.js" type="text/javascript"><\/script>')</script>

</head>

 	<body>
	  <nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">菜单</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">t1ger的茶馆</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                
                <li>
                    <a href="/" title="">
                    <i class="fa fa-home"></i>首页
                    </a>
                </li>
                
                <li>
                    <a href="/archives" title="">
                    <i class="fa fa-list"></i>存档
                    </a>
                </li>
                
                <li>
                    <a href="/about" title="">
                    <i class="fa fa-info-circle"></i>关于
                    </a>
                </li>
                
                <li>
                    <a href="/atom.xml" title="这是一个订阅源">
                    <i class="fa fa-rss"></i>RSS
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</nav>

	  <div class="container" >
	    <div class="row">
	
	<div class="col-md-9 center-content">
	

		<div class="content">
			<!-- index -->
		   

			  		<h2>rpmbuild使用方法简要</h2>
					
					<div>
						<span class="post-time">2016-12-29 12:05:13</span>
					</div>	
					

					<div class="article-content">
						<h5 id="Install-rpm-build-Package"><a href="#Install-rpm-build-Package" class="headerlink" title="Install rpm-build Package"></a><b>Install rpm-build Package</b></h5><ul>
<li>rpm-build package provides rpmbuild command which is used to build a binary RPM from source code, as configured with .spec file.</li>
<li>rpmdevtools package provides rpmdev-setuptree and rpmdev-newspec commands.</li>
<li>rpmdev-setuptree command is used to creates rpmbuild/ subdirectory, with appropriate subdirectories.</li>
<li><p>rpmdev-newspec command is used to creates a new package spec file in the local directory</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># yum install rpm-build rpmdevtools</div></pre></td></tr></table></figure>
<p>  rpm-build is dependent on the following package</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">elfutils-libelf</div><div class="line">rpm</div><div class="line">rpm-libs</div><div class="line">rpm-python</div></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="Create-RPM-Build-User"><a href="#Create-RPM-Build-User" class="headerlink" title="Create RPM Build User"></a><b>Create RPM Build User</b></h5><p>We do not want to build RPMs as the root account and maybe not even our personal account. It is common to have some form of rpm build account, maybe even, innovatively called rpmbuild. Logging as that user to build RPM files<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># useradd -m build</div><div class="line"># passwd build</div></pre></td></tr></table></figure></p>
<h5 id="RPM-Build-Directories"><a href="#RPM-Build-Directories" class="headerlink" title="RPM Build Directories"></a><b>RPM Build Directories</b></h5><p>rpm-build will automatically create the following directory structures that will be used during the RPM build.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># rpmdev-setuptree</div><div class="line"># ls -lF /root/rpmbuild/</div><div class="line">drwxr-xr-x. 2 root root 4096 Feb  4 12:21 BUILD/</div><div class="line">drwxr-xr-x. 2 root root 4096 Feb  4 12:21 BUILDROOT/</div><div class="line">drwxr-xr-x. 2 root root 4096 Feb  4 12:21 RPMS/</div><div class="line">drwxr-xr-x. 2 root root 4096 Feb  4 12:21 SOURCES/</div><div class="line">drwxr-xr-x. 2 root root 4096 Feb  4 12:21 SPECS/</div><div class="line">drwxr-xr-x. 2 root root 4096 Feb  4 12:21 SRPMS/</div></pre></td></tr></table></figure></p>
<h5 id="Download-Source-Tar-File"><a href="#Download-Source-Tar-File" class="headerlink" title="Download Source Tar File"></a><b>Download Source Tar File</b></h5><p>download the source tar file for the package that you want to build and save it under SOURCES directory</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># wget http://dev.mysql.com/get/Downloads/MySQL-5.6/mysql-5.6.21.tar.gz</div></pre></td></tr></table></figure>
<h5 id="Create-the-SPEC-File"><a href="#Create-the-SPEC-File" class="headerlink" title="Create the SPEC File"></a><b>Create the SPEC File</b></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">Name:</div><div class="line">Version:</div><div class="line">Release:	1%&#123;?dist&#125;</div><div class="line">Summary:</div><div class="line">Group:</div><div class="line">License:</div><div class="line">URL:</div><div class="line">Source0:</div><div class="line">BuildRoot:	%&#123;_tmppath&#125;/%&#123;name&#125;-%&#123;version&#125;-%&#123;release&#125;-root-%(%&#123;__id_u&#125; -n)</div><div class="line"></div><div class="line">BuildRequires:</div><div class="line">Requires:</div><div class="line"></div><div class="line">%description</div><div class="line"></div><div class="line">%prep</div><div class="line">%setup -q</div><div class="line"></div><div class="line">%build</div><div class="line">%configure</div><div class="line">make %&#123;?_smp_mflags&#125;</div><div class="line"></div><div class="line">%install</div><div class="line">rm -rf %&#123;buildroot&#125;</div><div class="line">make install DESTDIR=%&#123;buildroot&#125;</div><div class="line"></div><div class="line">%clean</div><div class="line">rm -rf %&#123;buildroot&#125;</div><div class="line"></div><div class="line">%files</div><div class="line">%defattr(-,root,root,-)</div><div class="line">%doc</div><div class="line"></div><div class="line">%changelog</div><div class="line"></div><div class="line">Name: Set the name of RPM. Whatever you give here will become the name of RPM.</div><div class="line">Version: Set RPM version number. Default is 1.0</div><div class="line">Release :Set release afterward, default is 1.el6 for RHEL 6</div><div class="line">Summary: describe the contents of the package</div><div class="line">Group: Related to the package groups listed in the XML file.</div><div class="line">License: RHEL 6 software is released under the GPL, but you can release your software under the license you prefer</div><div class="line">URL: Allow you to set the URL of your site.</div><div class="line">Above section specify the information required by package. When you run yum info [package name] or rpm -qi [package name ] command, you saw this information.</div><div class="line">BuildRoot: directory that will be used to actually build the software</div><div class="line">Source0 : specifies the name of the gzip compressed tar archive file. If you have multiple source you can specify them in series Source0, Source1, Source2 etc. For single source you can also use Source phrase.</div><div class="line">BuildRequires or Requires specifies the packages that must be installed before the RPM packages can be built with this spec file.</div><div class="line">%description allows you to include a brief paragraph description of the package.</div><div class="line">%prep commands require to prepare the source code</div><div class="line">%setup move the SOURCE into the BUILD directory and decompress the file archive.</div><div class="line">The –n option specifies the name of the directory where installation script should be entered after decompression.</div><div class="line">%install section is the place where software is compiled and installed.</div><div class="line">%files section allow you to include any additional file that you want in package. You can also specify the directory here, it will includes all files and subdirectories below it as well.</div><div class="line">%clean section will clean up the mess created during the process.</div></pre></td></tr></table></figure>
<p>Let look mysql5.6 program spec file<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div></pre></td><td class="code"><pre><div class="line">Name: mysql-rpm</div><div class="line">Version:5.6.21</div><div class="line">Release: renfengjun</div><div class="line">License: GPL</div><div class="line">URL: http://dev.mysql.com/</div><div class="line">Group: applications/database</div><div class="line">BuildRoot:%&#123;_tmppath&#125;/%&#123;name&#125;-%&#123;version&#125;-%&#123;release&#125;-root</div><div class="line">BuildRequires: cmake</div><div class="line">prefix: /usr/local/mysql</div><div class="line">Summary: mysql-5.6.21.tar.gz</div><div class="line">  </div><div class="line">%description</div><div class="line">The MySQL(TM) software delivers a very fast,multi-threaded, multi-user,</div><div class="line">and robust SQL (Structured Query Language)database server. MySQL Server</div><div class="line">is intended for mission-critical, heavy-loadproduction systems as well</div><div class="line">as for embedding into mass-deployed software.</div><div class="line">  </div><div class="line">%define MYSQL_USER mysql</div><div class="line">%define MYSQL_GROUP mysql</div><div class="line">%define __os_install_post %&#123;nil&#125;</div><div class="line">  </div><div class="line">%build</div><div class="line">cd $OLDPWD/../</div><div class="line">CFLAGS=&quot;-O3 -g -fno-exceptions-static-libgcc -fno-omit-frame-pointer -fno-strict-aliasing&quot;</div><div class="line">CXX=g++</div><div class="line">CXXFLAGS=&quot;-O3 -g -fno-exceptions -fno-rtti-static-libgcc -fno-omit-frame-pointer -fno-strict-aliasing&quot;</div><div class="line">export CFLAGS CXX CXXFLAGS</div><div class="line">  </div><div class="line">cmake .                                                 \</div><div class="line"> -DSYSCONFDIR:PATH=%&#123;prefix&#125;                            \</div><div class="line"> -DCMAKE_INSTALL_PREFIX:PATH=%&#123;prefix&#125;                  \</div><div class="line"> -DCMAKE_BUILD_TYPE:STRING=Release                      \</div><div class="line"> -DENABLE_PROFILING:BOOL=ON                             \</div><div class="line"> -DWITH_DEBUG:BOOL=OFF                                  \</div><div class="line"> -DWITH_VALGRIND:BOOL=OFF                               \</div><div class="line">  -DENABLE_DEBUG_SYNC:BOOL=OFF                           \</div><div class="line"> -DWITH_EXTRA_CHARSETS:STRING=all                       \</div><div class="line"> -DWITH_SSL:STRING=bundled                              \</div><div class="line"> -DWITH_UNIT_TESTS:BOOL=OFF                             \</div><div class="line"> -DWITH_ZLIB:STRING=bundled                             \</div><div class="line"> -DWITH_PARTITION_STORAGE_ENGINE:BOOL=ON                \</div><div class="line"> -DWITH_INNOBASE_STORAGE_ENGINE:BOOL=ON                 \</div><div class="line"> -DWITH_ARCHIVE_STORAGE_ENGINE:BOOL=ON                  \</div><div class="line"> -DWITH_BLACKHOLE_STORAGE_ENGINE:BOOL=ON                \</div><div class="line"> -DWITH_PERFSCHEMA_STORAGE_ENGINE:BOOL=ON               \</div><div class="line"> -DDEFAULT_CHARSET=utf8                                 \</div><div class="line"> -DDEFAULT_COLLATION=utf8_general_ci                    \</div><div class="line"> -DWITH_EXTRA_CHARSETS=all                             \</div><div class="line"> -DENABLED_LOCAL_INFILE:BOOL=ON                         \</div><div class="line"> -DWITH_EMBEDDED_SERVER=0                               \</div><div class="line"> -DINSTALL_LAYOUT:STRING=STANDALONE                     \</div><div class="line"> -DCOMMUNITY_BUILD:BOOL=ON                              \</div><div class="line">  -DMYSQL_SERVER_SUFFIX=&apos;-r5436&apos;;</div><div class="line">  </div><div class="line">make -j `cat /proc/cpuinfo | grep processor| wc-l`</div><div class="line">  </div><div class="line">%install</div><div class="line">cd $OLDPWD/../</div><div class="line">make DESTDIR=$RPM_BUILD_ROOT install</div><div class="line">  </div><div class="line">%clean</div><div class="line">rm -rf $RPM_BUILD_ROOT</div><div class="line">  </div><div class="line">%pre</div><div class="line">mkdir -p /usr/local/mysql/data</div><div class="line">mkdir -p /usr/local/mysql/run</div><div class="line">mkdir -p /usr/local/mysql/log</div><div class="line">groupadd mysql</div><div class="line">useradd -g mysql mysql</div><div class="line">chown -R mysql:mysql /usr/local/mysql/data</div><div class="line">chown -R mysql:mysql /usr/local/mysql/log</div><div class="line">chown -R mysql:mysql /usr/local/mysql/run</div><div class="line">echo &quot;exportPATH=$PATH:/usr/local/mysql/bin&quot; &gt;&gt; /home/mysql/.bash_profile</div><div class="line">  </div><div class="line">%post</div><div class="line">ln -s %&#123;prefix&#125;/lib %&#123;prefix&#125;/lib64</div><div class="line">cp /usr/local/mysql/support-files/mysql.server/etc/init.d/mysql</div><div class="line">chkconfig mysql on</div><div class="line">   </div><div class="line">%preun</div><div class="line">chkconfig --del mysql</div><div class="line">rm -rf /usr/local</div><div class="line">userdel mysql</div><div class="line">rm -rf /var/spool/mail/mysql</div><div class="line">rm -rf /etc/init.d/mysql</div><div class="line">rm -rf /home/mysql</div><div class="line">  </div><div class="line">%files</div><div class="line">%defattr(-, %&#123;MYSQL_USER&#125;, %&#123;MYSQL_GROUP&#125;)</div><div class="line">%attr(755, %&#123;MYSQL_USER&#125;, %&#123;MYSQL_GROUP&#125;)%&#123;prefix&#125;/*</div><div class="line"></div><div class="line">%changelog</div></pre></td></tr></table></figure></p>
<p>Now,we can start build<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rpmbuild -ba mysql.spec</div></pre></td></tr></table></figure></p>
<h5 id="Packaging-RPMMacros"><a href="#Packaging-RPMMacros" class="headerlink" title="Packaging:RPMMacros"></a><b>Packaging:RPMMacros</b></h5><ul>
<li><p>Macros mimicking autoconf variables</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">%&#123;_sysconfdir&#125;        /etc</div><div class="line">%&#123;_prefix&#125;            /usr</div><div class="line">%&#123;_exec_prefix&#125;       %&#123;_prefix&#125;</div><div class="line">%&#123;_bindir&#125;            %&#123;_exec_prefix&#125;/bin</div><div class="line">%&#123;_libdir&#125;            %&#123;_exec_prefix&#125;/%&#123;_lib&#125;</div><div class="line">%&#123;_libexecdir&#125;        %&#123;_exec_prefix&#125;/libexec</div><div class="line">%&#123;_sbindir&#125;           %&#123;_exec_prefix&#125;/sbin</div><div class="line">%&#123;_sharedstatedir&#125;    /var/lib</div><div class="line">%&#123;_datarootdir&#125;       %&#123;_prefix&#125;/share</div><div class="line">%&#123;_datadir&#125;           %&#123;_datarootdir&#125;</div><div class="line">%&#123;_includedir&#125;        %&#123;_prefix&#125;/include</div><div class="line">%&#123;_infodir&#125;           /usr/share/info</div><div class="line">%&#123;_mandir&#125;            /usr/share/man</div><div class="line">%&#123;_localstatedir&#125;     /var</div><div class="line">%&#123;_initddir&#125;          %&#123;_sysconfdir&#125;/rc.d/init.d</div></pre></td></tr></table></figure>
</li>
<li><p>Other macros and variables for paths</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">%&#123;_var&#125;               /var</div><div class="line">%&#123;_tmppath&#125;           %&#123;_var&#125;/tmp</div><div class="line">%&#123;_usr&#125;               /usr</div><div class="line">%&#123;_usrsrc&#125;            %&#123;_usr&#125;/src</div><div class="line">%&#123;_lib&#125;               lib (lib64 on 64bit multilib systems)</div><div class="line">%&#123;_docdir&#125;            %&#123;_datadir&#125;/doc</div><div class="line">%&#123;buildroot&#125;          %&#123;_buildrootdir&#125;/%&#123;name&#125;-%&#123;version&#125;-%&#123;release&#125;.%&#123;_arch&#125;</div><div class="line">$RPM_BUILD_ROOT       %&#123;buildroot&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Build flags macros and variables<br>These macros should be used as flags for the compiler or linker. Note that the values for the macros below reflect the settings on Fedora 13 (i686) with redhat-rpm-config installed.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">%&#123;__global_cflags&#125;   -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4</div><div class="line">%&#123;optflags&#125;          %&#123;__global_cflags&#125; -m32 -march=i686 -mtune=atom -fasynchronous-unwind-tables</div><div class="line">$RPM_OPT_FLAGS       %&#123;optflags&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>RPM directory macros</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">%&#123;_topdir&#125;            %&#123;getenv:HOME&#125;/rpmbuild</div><div class="line">%&#123;_builddir&#125;          %&#123;_topdir&#125;/BUILD</div><div class="line">%&#123;_rpmdir&#125;            %&#123;_topdir&#125;/RPMS</div><div class="line">%&#123;_sourcedir&#125;         %&#123;_topdir&#125;/SOURCES</div><div class="line">%&#123;_specdir&#125;           %&#123;_topdir&#125;/SPECS</div><div class="line">%&#123;_srcrpmdir&#125;         %&#123;_topdir&#125;/SRPMS</div><div class="line">%&#123;_buildrootdir&#125;      %&#123;_topdir&#125;/BUILDROOT</div></pre></td></tr></table></figure>
</li>
</ul>
<p><a href="https://fedoraproject.org/wiki/Packaging:RPMMacros?rd=Packaging/RPMMacros#RPM_directory_macros" target="_blank" rel="external">Packaging:RPMMacros</a><br><a href="https://fedoraproject.org/wiki/How_to_create_an_RPM_package/zh-cn" target="_blank" rel="external">How to create an RPM package/zh-cn</a></p>
<hr>
<p>您的鼓励是我写作最大的动力</p>
<p>俗话说，投资效率是最好的投资。 如果您感觉我的文章质量不错，读后收获很大，预计能为您提高 10% 的工作效率，不妨小额捐助我一下，让我有动力继续写出更多好文章。</p>

							<!-- 支付宝打赏图案 -->
      						<div id="donate_guide" class="donate_bar center ">
          					<a href="http://mypay-1253516637.costj.myqcloud.com/2000.jpg" title="支付宝打赏" class="fancybox" rel="article0"       style="float:left;margin-left:25%;margin-right:2px;">
          					<img src="http://mypay-1253516637.costj.myqcloud.com/2000.jpg" title="支付宝打赏" height="164px" width="164px">
          					</a> 
      						</div>
					</div>

			  <!-- about -->
			  
		</div>

		<!-- pagination -->
	  

		<div class="comment-section">
  
  


</div>
	</div>

	

</div>


		<footer>
			


<p>
  由 <a href="https://hexo.io">hexo</a> 强力驱动 |&nbsp;&nbsp;本站总点击 <span id="busuanzi_value_site_pv"></span> 次
&nbsp;&nbsp;|&nbsp;&nbsp;您是第 <span id="busuanzi_value_site_uv"></span> 位访客
</p>
<p>
  &copy; 2017 <a href="https://t1ger.github.io"> t1ger </a>
  &nbsp;&nbsp;|&nbsp;&nbsp;<span><a href="/baidusitemap.xml">百度网站地图</a></span>

</p>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

<script>
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-99921399-1', 'auto');
  ga('send', 'pageview');

</script>
		</footer>
	  </div>

		<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script>
		<script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>

		<!-- material design -->
		<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script>
		<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>
		<!-- toc -->
		<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
		<script src="/libs/tocify/jquery.tocify.custom.js"></script>

		<script src="/js/main.js"></script>

	</body>
</html>
